---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import { buildWhatsAppLink } from "@/shared/lib/whatsapp";

const products = await getCollection("products");
const featured = products.filter((p) => p.data.featured).slice(0, 3);

const whatsappHref = buildWhatsAppLink(
  "Olá! Vim pelo site da Casa Nacoli e gostaria de um orçamento.",
);

const items = [
  "Caneca personalizada",
  "Camisetas personalizadas",
  "Quebra-cabeças personalizado",
  "Chaveiros personalizados",
  "Cartões de visita",
  "Identidades visuais",
  "Sites",
  "Panfletos, adesivos e impressões",
  "Decoração de festas",
  "Azulejos decorados personalizados",
];
---

<BaseLayout
  title="Casa Nacoli"
  description="Casa Nacoli — gráfica artesanal independente em Lajeado/RS. Personalizados, impressos, identidade visual e sites."
  canonicalPath="/"
>
  <section
    class="relative overflow-hidden rounded-3xl border border-black/5 bg-white/40 p-8 md:p-12"
  >
    <div class="absolute -right-16 -top-16 size-56 rounded-full bg-[var(--cn-sky)]/35 blur-2xl">
    </div>
    <div
      class="absolute -bottom-20 -left-20 size-64 rounded-full bg-[var(--cn-mustard)]/20 blur-2xl"
    >
    </div>

    <div class="relative">
      <p class="text-sm font-medium text-black/60">Lajeado/RS</p>
      <h1 class="mt-3 text-3xl font-semibold tracking-tight text-[var(--cn-ink)] md:text-5xl">
        Gráfica artesanal independente.
        <span class="block text-[var(--cn-terracotta)]"
          >Personalizados e impressos com cuidado.</span
        >
      </h1>
      <p class="mt-5 max-w-2xl text-base leading-relaxed text-black/70 md:text-lg">
        Produzimos personalizados e materiais gráficos para presentes, eventos e marcas. Orçamento
        rápido pelo WhatsApp.
      </p>

      <div class="mt-8 flex flex-col gap-3 sm:flex-row">
        <a
          href={whatsappHref}
          target="_blank"
          rel="noreferrer"
          class="inline-flex items-center justify-center rounded-xl bg-[var(--cn-ink)] px-5 py-3 text-sm font-medium text-[var(--cn-cream)] hover:bg-black/80"
        >
          Pedir orçamento no WhatsApp
        </a>
        <a
          href="/catalogo"
          class="inline-flex items-center justify-center rounded-xl border border-black/10 bg-white/60 px-5 py-3 text-sm font-medium text-[var(--cn-ink)] hover:bg-white"
        >
          Ver catálogo
        </a>
      </div>

      <div class="mt-8 flex flex-wrap gap-2 text-xs text-black/60">
        <span class="rounded-full bg-white/70 px-3 py-1 ring-1 ring-black/5">Personalizados</span>
        <span class="rounded-full bg-white/70 px-3 py-1 ring-1 ring-black/5">Impressos</span>
        <span class="rounded-full bg-white/70 px-3 py-1 ring-1 ring-black/5">Identidade visual</span
        >
        <span class="rounded-full bg-white/70 px-3 py-1 ring-1 ring-black/5">Sites</span>
      </div>
    </div>
  </section>

  <section class="mt-14">
    <h2 class="text-xl font-semibold tracking-tight text-[var(--cn-ink)]">Produtos e serviços</h2>
    <p class="mt-2 max-w-2xl text-sm text-black/70">
      Uma seleção do que a Casa Nacoli faz. Se não encontrar aqui, chama no WhatsApp que a gente vê
      juntos.
    </p>

    <div class="mt-6 grid gap-3 sm:grid-cols-2 lg:grid-cols-3">
      {
        items.map((label) => (
          <div class="rounded-2xl border border-black/5 bg-white/50 p-5">
            <div class="text-sm font-medium text-[var(--cn-ink)]">{label}</div>
            <div class="mt-2 text-xs text-black/60">
              Orçamento sob medida conforme arte, variações e quantidade.
            </div>
          </div>
        ))
      }
    </div>
  </section>

  {
    featured.length ? (
      <section class="mt-14">
        <div class="flex items-end justify-between gap-4">
          <div>
            <h2 class="text-xl font-semibold tracking-tight text-[var(--cn-ink)]">
              Destaques do catálogo
            </h2>
            <p class="mt-2 text-sm text-black/70">Alguns itens em destaque para você começar.</p>
          </div>
          <a
            class="text-sm font-medium text-[var(--cn-terracotta)] hover:underline"
            href="/catalogo"
          >
            Ver todos
          </a>
        </div>

        <div class="mt-6 grid gap-4 md:grid-cols-3">
          {featured.map((p) => (
            <a
              href={`/catalogo/${p.slug}`}
              class="group rounded-2xl border border-black/5 bg-white/50 p-6 hover:bg-white"
            >
              <div class="text-sm font-semibold text-[var(--cn-ink)] group-hover:text-black">
                {p.data.title}
              </div>
              <div class="mt-2 text-sm text-black/70">{p.data.summary}</div>
              <div class="mt-4 text-xs font-medium text-[var(--cn-terracotta)]">Ver detalhes →</div>
            </a>
          ))}
        </div>
      </section>
    ) : null
  }

  <section class="mt-14 rounded-3xl border border-black/5 bg-white/40 p-8 md:p-10">
    <h2 class="text-xl font-semibold tracking-tight text-[var(--cn-ink)]">Como funciona</h2>

    <div class="mt-6 grid gap-4 md:grid-cols-3">
      <div class="rounded-2xl bg-white/60 p-6 ring-1 ring-black/5">
        <div class="text-xs font-semibold text-[var(--cn-mustard)]">01</div>
        <div class="mt-2 text-sm font-medium text-[var(--cn-ink)]">Você chama no WhatsApp</div>
        <div class="mt-2 text-sm text-black/70">
          Conta o que você precisa (produto, quantidade, variações e prazo).
        </div>
      </div>

      <div class="rounded-2xl bg-white/60 p-6 ring-1 ring-black/5">
        <div class="text-xs font-semibold text-[var(--cn-mustard)]">02</div>
        <div class="mt-2 text-sm font-medium text-[var(--cn-ink)]">Alinhamos a arte</div>
        <div class="mt-2 text-sm text-black/70">
          Você envia a arte ou a gente ajuda a ajustar e fechar o melhor resultado.
        </div>
      </div>

      <div class="rounded-2xl bg-white/60 p-6 ring-1 ring-black/5">
        <div class="text-xs font-semibold text-[var(--cn-mustard)]">03</div>
        <div class="mt-2 text-sm font-medium text-[var(--cn-ink)]">Produção e entrega</div>
        <div class="mt-2 text-sm text-black/70">
          Produção local em Lajeado/RS. Entrega/retirada a combinar.
        </div>
      </div>
    </div>

    <div class="mt-8 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between">
      <div class="text-sm text-black/70">Pronta para começar? Vamos fazer algo bonito juntos.</div>
      <a
        href={whatsappHref}
        target="_blank"
        rel="noreferrer"
        class="inline-flex items-center justify-center rounded-xl bg-[var(--cn-terracotta)] px-5 py-3 text-sm font-medium text-white hover:brightness-95"
      >
        Falar no WhatsApp
      </a>
    </div>
  </section>
</BaseLayout>
