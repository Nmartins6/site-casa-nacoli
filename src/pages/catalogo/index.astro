---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Section from "@/components/ui/Section.astro";
import PageHeader from "@/components/PageHeader.astro";
import Button from "@/components/ui/Button.astro";
import ProductCard from "@/features/product/ProductCard.astro";
import { container } from "@/container";
import { SITE } from "@/shared/config/site";

const products = await container.productRepository.getAll();
const featured = products.filter((p) => p.featured);
const all = products; // Or filter out featured if desired, but "All" usually implies everything.

const title = `Catálogo | ${SITE.name}`;
const description =
  "Catálogo de produtos e serviços da Casa Nacoli em Lajeado/RS. Personalizados, impressos e design.";
---

<BaseLayout title={title} description={description} canonicalPath="/catalogo">
  <PageHeader
    title="Catálogo"
    description="Produtos e serviços feitos com cuidado artesanal. Selecione um item para ver detalhes e pedir seu orçamento."
  />

  <Section>
    <div class="mt-6 grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
      {all.map((p) => <ProductCard product={p} />)}
    </div>
  </Section>

  <Section theme="cream" class="text-center">
    <h2 class="text-2xl font-semibold">Não encontrou o que procurava?</h2>
    <p class="mt-4 text-black/70">
      Trabalhamos com projetos especiais sob medida. Entre em contato e conte sua ideia.
    </p>
    <div class="mt-8">
      <Button href="/contato" variant="outline">Fale conosco</Button>
    </div>
  </Section>
</BaseLayout>
